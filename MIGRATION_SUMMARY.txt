â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   SENTINELWEB - PRODUÃ‡ÃƒO VPS                        â•‘
â•‘                      MIGRAÃ‡ÃƒO COMPLETA                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“… DATA: 08/01/2026
ğŸ‘¤ RESPONSÃVEL: DevOps/AppSec Senior Engineer
âœ… STATUS: PRONTO PARA DEPLOY

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” VULNERABILIDADES CORRIGIDAS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”´ CRÃTICAS (2):
  âœ… SECRET_KEY padrÃ£o â†’ ObrigatÃ³rio gerar 64 bytes aleatÃ³rios
  âœ… Container root â†’ UsuÃ¡rio nÃ£o-privilegiado (appuser)

ğŸŸ¡ ALTAS (2):
  âœ… SQLite â†’ PostgreSQL 15 com replicaÃ§Ã£o
  âœ… Portas expostas â†’ Apenas rede interna

ğŸŸ  MÃ‰DIAS (2):
  âœ… Rate limiting â†’ Nginx (5 req/min login, 30 req/min API)
  âœ… Debug logs â†’ LOG_LEVEL=INFO em produÃ§Ã£o

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“¦ ARQUIVOS CRIADOS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

INFRAESTRUTURA:
  âœ… docker-compose.prod.yml       (400 linhas) - PostgreSQL + Redis + Web
  âœ… Dockerfile.prod                (140 linhas) - Multi-stage otimizado
  âœ… nginx-sentinelweb.conf         (320 linhas) - Proxy reverso + SSL
  âœ… deploy.sh                      (650 linhas) - Deploy automatizado
  âœ… init-db.sql                    (90 linhas)  - OtimizaÃ§Ã£o PostgreSQL

CONFIGURAÃ‡ÃƒO:
  âœ… .env.production.example        - Template de variÃ¡veis
  âœ… requirements-prod.txt          - DependÃªncias PostgreSQL
  âœ… migrate_to_postgres.py         - Script de migraÃ§Ã£o

DOCUMENTAÃ‡ÃƒO:
  âœ… SECURITY_AUDIT.md              (350 linhas) - Auditoria completa
  âœ… DEPLOY_GUIDE.md                (550 linhas) - Guia passo-a-passo
  âœ… PRODUCTION_READY.md            (200 linhas) - Resumo executivo

CÃ“DIGO:
  âœ… database.py                    - Suporte PostgreSQL + pool
  âœ… main.py                        - Endpoint /health

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ—ï¸ INFRAESTRUTURA
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ANTES (Dev):                     DEPOIS (Prod):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SQLite (arquivo)          â†’      PostgreSQL 15 + volumes
Redis sem senha           â†’      Redis com autenticaÃ§Ã£o
Uvicorn standalone        â†’      Nginx + Uvicorn (4 workers)
HTTP                      â†’      HTTPS (Let's Encrypt A+)
Sem firewall              â†’      UFW + Fail2Ban
Backups manuais           â†’      AutomÃ¡ticos (2AM diÃ¡rios)
Container root            â†’      UsuÃ¡rio nÃ£o-privilegiado
Portas expostas           â†’      Apenas localhost/rede interna

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸš€ COMO FAZER O DEPLOY
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. PREPARAÃ‡ÃƒO (no seu computador):
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   # Gere as senhas
   python3 -c "import secrets; print(secrets.token_urlsafe(64))"  # SECRET_KEY
   python3 -c "import secrets; print(secrets.token_urlsafe(32))"  # POSTGRES_PASSWORD
   python3 -c "import secrets; print(secrets.token_urlsafe(32))"  # REDIS_PASSWORD
   
   # Configure o .env
   cp .env.production.example .env
   nano .env  # Cole as senhas geradas

2. UPLOAD PARA VPS:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   scp -r sentinelweb/ root@seu-vps:/opt/

3. EXECUTAR DEPLOY:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   ssh root@seu-vps
   cd /opt/sentinelweb
   bash deploy.sh

4. AGUARDAR:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€
   â±ï¸  Tempo estimado: 15-30 minutos
   
   O script irÃ¡:
   âœ… Instalar Docker, Nginx, Certbot
   âœ… Configurar Firewall (UFW)
   âœ… Obter certificado SSL
   âœ… Construir imagens Docker
   âœ… Iniciar containers
   âœ… Migrar banco de dados
   âœ… Criar superusuÃ¡rio
   âœ… Configurar backups automÃ¡ticos

5. ACESSAR:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€
   https://seudominio.com.br

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š ESPECIFICAÃ‡Ã•ES TÃ‰CNICAS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

REQUISITOS MÃNIMOS:
  â€¢ CPU: 2 cores
  â€¢ RAM: 4 GB
  â€¢ Disco: 50 GB SSD
  â€¢ Rede: 100 Mbps
  â€¢ OS: Ubuntu 22.04 LTS

CAPACIDADE:
  â€¢ Sites monitorados: 10.000+
  â€¢ VerificaÃ§Ãµes/min: 200
  â€¢ UsuÃ¡rios simultÃ¢neos: 500+
  â€¢ HistÃ³rico: 90 dias

CONTAINERS:
  â€¢ PostgreSQL:    2 CPU / 2 GB RAM
  â€¢ Redis:         1 CPU / 512 MB RAM
  â€¢ Web (FastAPI): 2 CPU / 2 GB RAM
  â€¢ Celery Worker: 2 CPU / 2 GB RAM
  â€¢ Celery Beat:   0.5 CPU / 256 MB RAM

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” SEGURANÃ‡A
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

PORTAS EXPOSTAS:
  âœ… 22   - SSH (Fail2Ban protegendo)
  âœ… 80   - HTTP (redirect para HTTPS)
  âœ… 443  - HTTPS (Nginx)
  âŒ 8000 - FastAPI (apenas localhost)
  âŒ 5432 - PostgreSQL (rede interna)
  âŒ 6379 - Redis (rede interna)

HEADERS DE SEGURANÃ‡A:
  âœ… HSTS (Strict-Transport-Security)
  âœ… X-Frame-Options: SAMEORIGIN
  âœ… X-Content-Type-Options: nosniff
  âœ… X-XSS-Protection
  âœ… CSP (Content-Security-Policy)
  âœ… Referrer-Policy

PROTEÃ‡Ã•ES:
  âœ… Rate limiting (Nginx)
  âœ… Fail2Ban (brute force)
  âœ… UFW Firewall
  âœ… SSL/TLS A+ (SSL Labs)
  âœ… Senhas fortes obrigatÃ³rias
  âœ… Containers nÃ£o-privilegiados

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ› ï¸ COMANDOS ESSENCIAIS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# Ver status dos containers
docker compose -f /opt/sentinelweb/docker-compose.prod.yml ps

# Ver logs em tempo real
docker compose -f /opt/sentinelweb/docker-compose.prod.yml logs -f web

# Reiniciar aplicaÃ§Ã£o
docker compose -f /opt/sentinelweb/docker-compose.prod.yml restart

# Backup manual
/usr/local/bin/sentinelweb-backup.sh

# Health check
curl https://seudominio.com.br/health

# Acessar PostgreSQL
docker compose -f /opt/sentinelweb/docker-compose.prod.yml exec db \
  psql -U sentinelweb_user sentinelweb_prod

# Renovar SSL
certbot renew

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… CHECKLIST PRÃ‰-DEPLOY
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CREDENCIAIS:
  [ ] SECRET_KEY gerada (64 bytes)
  [ ] POSTGRES_PASSWORD gerada (32 bytes)
  [ ] REDIS_PASSWORD gerada (32 bytes)
  [ ] Chave API Asaas (opcional)
  [ ] Token Bot Telegram (opcional)

SERVIDOR:
  [ ] VPS com Ubuntu 22.04
  [ ] Acesso SSH root
  [ ] DomÃ­nio apontando para IP
  [ ] Email para certificado SSL

ARQUIVOS:
  [ ] .env configurado
  [ ] CÃ³digo da aplicaÃ§Ã£o
  [ ] Backup do SQLite (se migrar)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š DOCUMENTAÃ‡ÃƒO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ğŸ“– SECURITY_AUDIT.md      - Auditoria completa de seguranÃ§a
  ğŸ“– DEPLOY_GUIDE.md         - Guia detalhado de deploy
  ğŸ“– PRODUCTION_READY.md     - Resumo executivo
  ğŸ“– README.md               - DocumentaÃ§Ã£o geral
  ğŸ“– API_EXAMPLES.md         - Exemplos de API
  ğŸ“– TELEGRAM_SETUP.md       - ConfiguraÃ§Ã£o de alertas

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ‰ SISTEMA PRONTO PARA PRODUÃ‡ÃƒO!
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Todos os arquivos necessÃ¡rios foram criados.
Auditoria de seguranÃ§a completa.
Infraestrutura otimizada para escala.

PrÃ³ximo passo: Execute bash deploy.sh no servidor VPS

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              BOA SORTE COM O DEPLOY! ğŸš€                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
